window.NexT||(window.NexT={}),function(){const d='next-config',a={};let b={};const e=a=>JSON.parse(a||'{}'),c=c=>{const f=document.querySelector(`.${d}[data-name="${c}"]`);if(!f)return;const g=e(f.text);c==='main'?Object.assign(a,g):b[c]=g};c('main'),window.NexT.CONFIG=new Proxy({},{get(f,d){let e;if(d in a?e=a[d]:(d in b||c(d),e=b[d]),!(d in f)&&typeof e=='object'&&(f[d]={}),d in f){const a=f[d];return typeof a=='object'&&typeof e=='object'?new Proxy({...e,...a},{set(d,b,c){return d[b]=c,a[b]=c,!0}}):a}return e}})}(),HTMLElement.prototype.wrap=function(a){this.parentNode.insertBefore(a,this),this.parentNode.removeChild(this),a.appendChild(this)},function(){const a=()=>document.dispatchEvent(new Event('page:loaded',{bubbles:!0}));document.readyState==='loading'?document.addEventListener('readystatechange',a,{once:!0}):a(),document.addEventListener('pjax:success',a)}(),NexT.utils={regSwitchThemeBtn:function(){const a=document.getElementById('switch-theme');if(!a)return;a.addEventListener('click',()=>{const a=document.documentElement.getAttribute('data-theme');NexT.utils.toggleDarkMode(!(a=='dark'))})},activeThemeMode:function(){const a=window.matchMedia("(prefers-color-scheme: dark)");let b=NexT.CONFIG.darkmode||a.matches;const c=NexT.utils.getLocalStorage('theme');(c=='light'||c==void 0&&!NexT.CONFIG.darkmode)&&(b=!1),NexT.utils.toggleDarkMode(b),a.addListener(function(a){toggleDarkMode(a.matches)})},toggleDarkMode:function(a){a?(document.documentElement.setAttribute('data-theme','dark'),NexT.utils.setLocalStorage('theme','dark',2)):(document.documentElement.setAttribute('data-theme','light'),NexT.utils.setLocalStorage('theme','light',2));const b=a?'dark':'light';NexT.utils.toggleGiscusDarkMode(b)},toggleGiscusDarkMode:function(b){const a=document.querySelector('iframe.giscus-frame');if(a){const c={setConfig:{theme:b}};a.contentWindow.postMessage({giscus:c},'https://giscus.app')}},setLocalStorage:function(b,c,a){if(a===0)return;const d=new Date,e=a*864e5,f={value:c,expiry:d.getTime()+e};localStorage.setItem(b,JSON.stringify(f))},getLocalStorage:function(a){const b=localStorage.getItem(a);if(!b)return void 0;const c=JSON.parse(b),d=new Date;return d.getTime()>c.expiry?(localStorage.removeItem(a),void 0):c.value},domAddClass:function(b,c){const a=document.querySelectorAll(b);a&&a.forEach(a=>{a.classList.add(c)})},calSiteInfo:function(){const a=document.getElementById('runTimes');if(a){const b=a.getAttribute('data-publishDate'),c=NexT.utils.diffDate(b,2);a.innerText=c}const b=document.getElementById('wordsCount');if(b){const a=b.getAttribute('data-count');b.innerText=NexT.utils.numberFormat(a)}const c=document.getElementById('readTimes');if(c){const a=c.getAttribute('data-times'),b=60,g=b*24,e=parseInt(a/g),f=parseInt(a/b);let d;e>=1?d=e+NexT.CONFIG.i18n.ds_days+parseInt((a-e*g)/b)+NexT.CONFIG.i18n.ds_hours:f>=1?d=f+NexT.CONFIG.i18n.ds_hours+(a-f*b)+NexT.CONFIG.i18n.ds_mins:d=a+NexT.CONFIG.i18n.ds_mins,c.innerText=d}const d=document.getElementById('last-push-date');if(d){const a=NexT.utils.diffDate(d.getAttribute('data-lastPushDate'),1);d.innerText=a}const e=document.querySelectorAll('#la-siteinfo-widget span');if(e.length>0){const a=[0,2,4,6],b=['today_site_pv','yesterday_site_pv','month_site_pv','total_site_pv'];for(var f in a){let c=NexT.utils.numberFormat(e[a[f]].innerText);document.getElementById(b[f]).innerText=c}}setTimeout(()=>{NexT.utils.fmtBusuanzi()},500)},fmtBusuanzi:function(){const a=document.getElementById('busuanzi_value_site_uv');a&&(a.innerText=NexT.utils.numberFormat(a.innerText));const b=document.getElementById('busuanzi_value_site_pv');b&&(b.innerText=NexT.utils.numberFormat(b.innerText))},numberFormat:function(a){let b;return a.indexOf(',')>0&&(a=a.replaceAll(",","")),a>1e4?b=(a/1e4).toFixed(2)+' w':a>1e3?b=(a/1e3).toFixed(2)+' k':b=a,b},diffDate:function(j,h=0){const k=new Date,f=new Date(j),b=k.getTime()-f.getTime(),g=1e3*60,d=g*60,c=d*24,e=c*30,i=e*12;let a;if(h==1){const h=b/e,i=b/c,j=b/d,k=b/g;h>12?a=f.toLocaleDateString().replace(/\//g,'-'):h>=1?a=parseInt(h)+NexT.CONFIG.i18n.ds_month:i>=1?a=parseInt(i)+NexT.CONFIG.i18n.ds_day:j>=1?a=parseInt(j)+NexT.CONFIG.i18n.ds_hour:k>=1?a=parseInt(k)+NexT.CONFIG.i18n.ds_min:a=NexT.CONFIG.i18n.ds_just}else if(h==2){const d=parseInt(b/i);if(d>=1){const e=parseInt((b-d*i)/c);a=d+NexT.CONFIG.i18n.ds_years+e+NexT.CONFIG.i18n.ds_days}else{const d=parseInt(b/c);a=d+NexT.CONFIG.i18n.ds_days}}else a=parseInt(b/c);return a},checkDOMExist:function(a){return document.querySelector(a)!=null},getCDNResource:function(f){let{plugins:g,router:e}=NexT.CONFIG.vendor,{name:b,version:c,file:d,alias:h}=f,i=b,a='';switch(g){case'cdnjs':let f=h||b,g=d.replace(/\.js$/,'.min.js').replace(/^(dist|lib|source\/js|)\/(browser\/|)/,'');a=`${e}/${f}/${c}/${g}`;break;default:a=`${e}/${i}@${c}/${d}`}return a},replacePostCRLink:function(){if(NexT.CONFIG.hostname.startsWith('http'))return;let a=window.location.href;a.indexOf('#')>-1&&(a=a.split('#')[0]);let b=document.getElementById('post-cr-link');if(!b)return;b.text=a,b.href=a},registerCopyCode:function(){if(!NexT.CONFIG.copybtn)return;let a=document.querySelectorAll('.highlight pre');if(a.length===0||!NexT.CONFIG.copybtn)return;a.forEach(a=>{let c=a.querySelector('code').className;if(c=='')return;a.insertAdjacentHTML('beforeend','<div class="copy-btn"><i class="fa fa-copy fa-fw"></i></div>');const b=a.querySelector('.copy-btn');b.addEventListener('click',()=>{const d=a.querySelector('.code')||a.querySelector('code'),c=d.innerText;if(navigator.clipboard)navigator.clipboard.writeText(c).then(()=>{b.querySelector('i').className='fa fa-check-circle fa-fw'},()=>{b.querySelector('i').className='fa fa-times-circle fa-fw'});else{const a=document.createElement('textarea');a.style.top=window.scrollY+'px',a.style.position='absolute',a.style.opacity='0',a.readOnly=!0,a.value=c,document.body.append(a),a.select(),a.setSelectionRange(0,c.length),a.readOnly=!1;const d=document.execCommand('copy');b.querySelector('i').className=d?'fa fa-check-circle fa-fw':'fa fa-times-circle fa-fw',a.blur(),b.blur(),document.body.removeChild(a)}}),a.addEventListener('mouseleave',()=>{setTimeout(()=>{b.querySelector('i').className='fa fa-copy fa-fw'},300)})})},wrapTableWithBox:function(){document.querySelectorAll('table').forEach(b=>{const a=document.createElement('div');a.className='table-container',b.wrap(a)})},registerVideoIframe:function(){document.querySelectorAll('iframe').forEach(a=>{const b=['www.youtube.com','player.vimeo.com','player.youku.com','player.bilibili.com','www.tudou.com'].some(b=>a.src.includes(b));if(b&&!a.parentNode.matches('.video-container')){const b=document.createElement('div');b.className='video-container',a.wrap(b);const c=Number(a.width),d=Number(a.height);c&&d&&(b.style.paddingTop=d/c*100+'%')}})},registerScrollPercent:function(){const a=document.querySelector('.back-to-top'),b=document.querySelector('.reading-progress-bar');window.addEventListener('scroll',()=>{if(a||b){const c=document.body.scrollHeight-window.innerHeight,d=c>0?Math.min(100*window.scrollY/c,100):0;if(a){const b=Math.round(d),c=b>=5;a.classList.toggle('back-to-top-on',c),a.querySelector('span').innerText=b+'%'}b&&b.style.setProperty('--progress',d.toFixed(2)+'%')}if(!Array.isArray(NexT.utils.sections))return;let c=NexT.utils.sections.findIndex(a=>a&&a.getBoundingClientRect().top>10);c===-1?c=NexT.utils.sections.length-1:c>0&&c--,this.activateNavByIndex(c)},{passive:!0}),a&&a.addEventListener('click',()=>{window.anime({targets:document.scrollingElement,duration:500,easing:'linear',scrollTop:0})})},registerTabsTag:function(){document.querySelectorAll('.tabs ul.nav-tabs .tab').forEach(a=>{a.addEventListener('click',d=>{if(d.preventDefault(),a.classList.contains('active'))return;const c=a.parentNode;[...c.children].forEach(b=>{b.classList.toggle('active',b===a)});const b=document.getElementById(a.querySelector('a').getAttribute('href').replace('#',''));if([...b.parentNode.children].forEach(a=>{a.classList.toggle('active',a===b)}),b.dispatchEvent(new Event('tabs:click',{bubbles:!0})),!NexT.CONFIG.stickytabs)return;const e=c.parentNode.getBoundingClientRect().top+window.scrollY+10;window.anime({targets:document.scrollingElement,duration:500,easing:'linear',scrollTop:e})})}),window.dispatchEvent(new Event('tabs:register'))},registerCanIUseTag:function(){window.addEventListener('message',({data:a})=>{if(typeof a=='string'&&a.includes('ciu_embed')){const b=a.split(':')[1],c=a.split(':')[2];document.querySelector(`iframe[data-feature=${b}]`).style.height=parseInt(c,10)+5+'px'}},!1)},registerSidebarTOC:function(){this.sections=[...document.querySelectorAll('.post-toc li a.nav-link')].map(a=>{const b=document.getElementById(decodeURI(a.getAttribute('href')).replace('#',''));return a.addEventListener('click',c=>{c.preventDefault();const d=b.getBoundingClientRect().top+window.scrollY;window.anime({targets:document.scrollingElement,duration:500,easing:'linear',scrollTop:d,complete:()=>{history.pushState(null,document.title,a.href)}})}),b})},registerPostReward:function(){const a=document.querySelector('.reward-container button');if(!a)return;a.addEventListener('click',()=>{document.querySelector('.post-reward').classList.toggle('active')})},initCommontesDispaly:function(){const a=document.querySelectorAll('.comment-wrap > div');if(a.length<=1)return;a.forEach(function(a){var b=window.getComputedStyle(a,null).display;a.style.display=b})},registerCommonSwitch:function(){const a=document.querySelector('.comment-switch .switch-btn');if(!a)return;const b=document.querySelectorAll('.comment-wrap > div');a.addEventListener('click',()=>{a.classList.toggle('move'),b.forEach(function(a){a.style.display==='none'?a.style.cssText="display: block; animation: tabshow .8s":a.style.cssText="display: none;"})})},hideCommontes:function(){document.querySelector('.post-comments').style.display='none'},hiddeLodingCmp:function(a){const b=document.querySelector(a).previousElementSibling;b.style.display='none'},activateNavByIndex:function(d){const a=document.querySelectorAll('.post-toc li a.nav-link')[d];if(!a||a.classList.contains('active-current'))return;document.querySelectorAll('.post-toc .active').forEach(a=>{a.classList.remove('active','active-current')}),a.classList.add('active','active-current');let b=a.parentNode;while(!b.matches('.post-toc'))b.matches('li')&&b.classList.add('active'),b=b.parentNode;const c=document.querySelector('.sidebar-panel-container');if(!c.parentNode.classList.contains('sidebar-toc-active'))return;window.anime({targets:c,duration:200,easing:'linear',scrollTop:c.scrollTop-c.offsetHeight/2+a.getBoundingClientRect().top-c.getBoundingClientRect().top})},updateSidebarPosition:function(){if(window.innerWidth<992||NexT.CONFIG.scheme==='Pisces'||NexT.CONFIG.scheme==='Gemini')return;const b=document.querySelector('.post-toc');let a=NexT.CONFIG.sidebar;typeof a!='boolean'&&(a=NexT.CONFIG.sidebar.display==='always'||NexT.CONFIG.sidebar.display==='post'&&b),a&&window.dispatchEvent(new Event('sidebar:show'))},activateSidebarPanel:function(a){const c=200,d=document.querySelector('.sidebar-inner'),e=document.querySelector('.sidebar-panel-container'),b=['sidebar-toc-active','sidebar-overview-active'];if(d.classList.contains(b[a]))return;window.anime({duration:c,targets:e,easing:'linear',opacity:0,translateY:[0,-20],complete:()=>{d.classList.replace(b[1-a],b[a]),window.anime({duration:c,targets:e,easing:'linear',opacity:[0,1],translateY:[-20,0]})}})},getStyle:function(b,c){const a=document.createElement('link');a.setAttribute('rel','stylesheet'),a.setAttribute('type','text/css'),a.setAttribute('href',b),(c||document.head).appendChild(a)},getScript:function(a,b={},e){if(typeof b=='function')return this.getScript(a,{condition:e}).then(b);const{condition:f=!1,attributes:{id:c='',async:g=!1,defer:h=!1,crossOrigin:d='',dataset:i={},...j}={},parentNode:k=null}=b;return new Promise((b,e)=>{if(f)b();else{const f=document.createElement('script');if(c&&(f.id=c),d&&(f.crossOrigin=d),f.async=g,f.defer=h,Object.assign(f.dataset,i),Object.entries(j).forEach(([a,b])=>{f.setAttribute(a,String(b))}),f.onload=b,f.onerror=e,typeof a=='object'){const{url:c,integrity:b}=a;f.src=c,b&&(f.integrity=b,f.crossOrigin='anonymous')}else f.src=a;(k||document.head).appendChild(f)}})},loadComments:function(a,b){return b?this.loadComments(a).then(b):new Promise(b=>{const c=document.querySelector(a);if(!c){b();return}const d=new IntersectionObserver((a,c)=>{const d=a[0];if(!d.isIntersecting)return;b(),c.disconnect()});d.observe(c)})}},NexT.boot={},NexT.boot.activeThemeMode=function(){NexT.utils.activeThemeMode()},NexT.boot.registerEvents=function(){NexT.utils.registerScrollPercent(),document.querySelector('.site-nav-toggle .toggle').addEventListener('click',b=>{b.currentTarget.classList.toggle('toggle-close');const a=document.querySelector('.site-nav');if(!a)return;a.style.setProperty('--scroll-height',a.scrollHeight+'px'),document.body.classList.toggle('site-nav-on')}),document.querySelectorAll('.sidebar-nav li').forEach((a,b)=>{a.addEventListener('click',()=>{NexT.utils.activateSidebarPanel(b)})}),window.addEventListener('hashchange',()=>{const a=location.hash;if(a!==''&&!a.match(/%\S{2}/)){const b=document.querySelector(`.tabs ul.nav-tabs li a[href="${a}"]`);b&&b.click()}})},NexT.boot.refresh=function(){if(NexT.utils.calSiteInfo(),NexT.utils.regSwitchThemeBtn(),!NexT.CONFIG.page.isPage)return;NexT.utils.registerSidebarTOC(),NexT.utils.replacePostCRLink(),NexT.utils.registerCopyCode(),NexT.utils.registerPostReward(),NexT.CONFIG.page.comments?(NexT.utils.initCommontesDispaly(),NexT.utils.registerCommonSwitch(),NexT.utils.domAddClass('#goto-comments','goto-comments-on')):NexT.utils.hideCommontes()},NexT.boot.motion=function(){NexT.CONFIG.motion.enable&&NexT.motion.integrator.add(NexT.motion.middleWares.header).add(NexT.motion.middleWares.postList).add(NexT.motion.middleWares.sidebar).add(NexT.motion.middleWares.footer).bootstrap(),NexT.utils.updateSidebarPosition()},document.addEventListener('DOMContentLoaded',()=>{NexT.boot.activeThemeMode(),NexT.boot.registerEvents(),NexT.boot.motion(),NexT.boot.refresh()}),NexT.motion={},NexT.motion.integrator={queue:[],init:function(){return this.queue=[],this},add:function(b){const a=b();return NexT.CONFIG.motion.async?this.queue.push(a):this.queue=this.queue.concat(a),this},bootstrap:function(){NexT.CONFIG.motion.async||(this.queue=[this.queue]),this.queue.forEach(b=>{const a=window.anime.timeline({duration:200,easing:'linear'});b.forEach(b=>{b.deltaT?a.add(b,b.deltaT):a.add(b)})})}},NexT.motion.middleWares={header:function(){const b=[];function c(a){b.push({targets:a,scaleX:[0,1],duration:500,deltaT:'-=200'})}function a(a,c=!1){b.push({targets:a,opacity:1,top:0,deltaT:c?'-=200':'-=0'})}return a('header.header'),NexT.CONFIG.scheme==='Mist'&&c('.logo-line'),NexT.CONFIG.scheme==='Muse'&&a('.custom-logo-image'),a('.site-title'),a('.site-brand-container .toggle',!0),a('.site-subtitle'),(NexT.CONFIG.scheme==='Pisces'||NexT.CONFIG.scheme==='Gemini')&&a('.custom-logo-image'),document.querySelectorAll('.menu-item').forEach(a=>{b.push({targets:a,complete:()=>a.classList.add('animated','fadeInDown'),deltaT:'-=200'})}),b},subMenu:function(){const a=document.querySelectorAll('.sub-menu .menu-item');return a.length>0&&a.forEach(a=>{a.classList.add('animated')}),[]},postList:function(){const b=[],{postblock:c,postheader:d,postbody:e,collheader:f}=NexT.CONFIG.motion.transition;function a(a,c){if(!a)return;document.querySelectorAll(c).forEach(c=>{b.push({targets:c,complete:()=>c.classList.add('animated',a),deltaT:'-=100'})})}return a(c,'.post-block,.flinks-block, .pagination, .post-comments'),a(f,'.collection-header'),a(d,'.post-header'),a(e,'.post-body'),b},sidebar:function(){const a=document.querySelector('.sidebar'),b=NexT.CONFIG.motion.transition.sidebar;return b&&(NexT.CONFIG.scheme==='Pisces'||NexT.CONFIG.scheme==='Gemini')?[{targets:a,complete:()=>a.classList.add('animated',b)}]:[]},footer:function(){return[{targets:document.querySelector('.footer'),opacity:1}]}},document.addEventListener('DOMContentLoaded',()=>{'use strict';const a=()=>{localStorage.setItem('bookmark'+location.pathname,window.scrollY)},b=()=>{let a=localStorage.getItem('bookmark'+location.pathname);a=parseInt(a,10),!isNaN(a)&&location.hash===''&&window.anime({targets:document.scrollingElement,duration:200,easing:'linear',scrollTop:a})},c=function(d){const c=document.querySelector('.book-mark-link');window.addEventListener('scroll',()=>c.classList.toggle('book-mark-link-fixed',window.scrollY===0),{passive:!0}),d==='auto'&&(window.addEventListener('beforeunload',a),document.addEventListener('pjax:send',a)),c.addEventListener('click',()=>{a(),window.anime({targets:c,duration:200,easing:'linear',top:-30,complete:()=>{setTimeout(()=>{c.style.top=''},400)}})}),b(),document.addEventListener('pjax:success',b)};c(NexT.CONFIG.bookmark.save)}),document.addEventListener('DOMContentLoaded',()=>{const a='.addthis_inline_share_toolbox';if(!NexT.CONFIG.addthis||!NexT.utils.checkDOMExist(a))return;const b=NexT.CONFIG.addthis.js+'?pubid='+NexT.CONFIG.addthis.cfg.pubid;NexT.utils.loadComments(a).then(()=>{NexT.utils.getScript(b,{attributes:{async:!0},parentNode:document.querySelector(a)})})}),document.addEventListener('DOMContentLoaded',()=>{const a='.waline-container';if(!NexT.CONFIG.page.comments||!NexT.CONFIG.waline||!NexT.utils.checkDOMExist(a))return;const{emoji:h,imguploader:c,pageview:d,placeholder:e,sofa:f,requiredmeta:g,serverurl:o,wordlimit:i,reaction:j,reactiontext:k,reactiontitle:l}=NexT.CONFIG.waline.cfg,m=NexT.utils.getCDNResource(NexT.CONFIG.waline.css);NexT.utils.getStyle(m,null);const n=NexT.utils.getCDNResource(NexT.CONFIG.waline.js);let b={placeholder:e,sofa:f,reactionTitle:l};k.forEach(function(a,c){b['reaction'+c]=a}),NexT.utils.loadComments(a).then(()=>NexT.utils.getScript(n,{})).then(()=>{Waline.init({locale:b,el:a,pageview:d,emoji:h,imageUploader:c,wordLimit:i,requiredMeta:g,reaction:j,serverURL:o,lang:NexT.CONFIG.lang,dark:'html[data-theme="dark"]'}),NexT.utils.hiddeLodingCmp(a)})}),document.addEventListener('DOMContentLoaded',()=>{const a='.giscus-container';if(!NexT.CONFIG.page.comments||!NexT.CONFIG.giscus||!NexT.utils.checkDOMExist(a))return;const{category:b,categoryid:c,emit:d,inputposition:e,mapping:f,reactions:g,repo:h,repoid:i,theme:j}=NexT.CONFIG.giscus.cfg;NexT.utils.loadComments(a).then(()=>NexT.utils.getScript(NexT.CONFIG.giscus.js,{attributes:{async:!0,crossorigin:'anonymous','data-repo':h,'data-repo-id':i,'data-category':b,'data-category-id':c,'data-mapping':f,'data-reactions-enabled':g?1:0,'data-emit-metadata':d?1:0,'data-input-position':e,'data-theme':j,'data-lang':NexT.CONFIG.lang,'data-loading':'lazy'},parentNode:document.querySelector(a)})),NexT.utils.hiddeLodingCmp(a)});class LocalSearch{constructor({path:a='',unescape:b=!1,top_n_per_article:c=1}){this.path=a,this.unescape=b,this.top_n_per_article=c,this.isfetched=!1,this.datas=null}getIndexByWord(e,a,c=!1){const b=[],d=new Set;return c||(a=a.toLowerCase()),e.forEach(e=>{if(this.unescape){const a=document.createElement('div');a.innerText=e,e=a.innerHTML}const g=e.length;if(g===0)return;let h=0,f=-1;for(c||(e=e.toLowerCase());(f=a.indexOf(e,h))>-1;)b.push({position:f,word:e}),d.add(e),h=f+g}),b.sort((a,b)=>a.position!==b.position?a.position-b.position:b.word.length-a.word.length),[b,d]}mergeIntoSlice(h,f,a){let d=a[0],{position:b,word:c}=d;const e=[],g=new Set;while(b+c.length<=f&&a.length!==0){g.add(c),e.push({position:b,length:c.length});const f=b+c.length;for(a.shift();a.length!==0;)if(d=a[0],b=d.position,c=d.word,f>b)a.shift();else break}return{hits:e,start:h,end:f,count:g.size}}highlightKeyword(b,c){let a='',d=c.start;for(const{position:e,length:f}of c.hits)a+=b.substring(d,e),d=e+f,a+=`<mark class="search-keyword">${b.substr(e,f)}</mark>`;return a+=b.substring(d,c.end),a}getResultItems(a){const b=[];return this.datas.forEach(({title:g,content:j,url:c})=>{const[h,n]=this.getIndexByWord(a,g),[f,o]=this.getIndexByWord(a,j),m=new Set([...n,...o]).size,l=h.length+f.length;if(l===0)return;const i=[];h.length!==0&&i.push(this.mergeIntoSlice(0,g.length,h));let d=[];while(f.length!==0){const b=f[0],{position:a}=b,c=Math.max(0,a-20),e=Math.min(j.length,a+80);d.push(this.mergeIntoSlice(c,e,f))}d.sort((a,b)=>a.count!==b.count?b.count-a.count:a.hits.length!==b.hits.length?b.hits.length-a.hits.length:a.start-b.start);const k=parseInt(this.top_n_per_article,10);k>=0&&(d=d.slice(0,k));let e='';c=new URL(c,location.origin),c.searchParams.append('highlight',a.join(' ')),i.length!==0?e+=`<li><a href="${c.href}" class="search-result-title">${this.highlightKeyword(g,i[0])}</a>`:e+=`<li><a href="${c.href}" class="search-result-title">${g}</a>`,d.forEach(a=>{e+=`<a href="${c.href}"><p class="search-result">${this.highlightKeyword(j,a)}...</p></a>`}),e+='</li>',b.push({item:e,id:b.length,hitCount:l,includedCount:m})}),b}fetchData(){const a=!this.path.endsWith('json');fetch(this.path).then(a=>a.text()).then(b=>{this.isfetched=!0,this.datas=a?[...(new DOMParser).parseFromString(b,'text/xml').querySelectorAll('entry')].map(a=>({title:a.querySelector('title').textContent,content:a.querySelector('content').textContent,url:a.querySelector('url').textContent})):JSON.parse(b),this.datas=this.datas.filter(a=>a.title).map(a=>(a.title=a.title.trim(),a.content=a.content?a.content.trim().replace(/<[^>]+>/g,''):'',a.url=decodeURIComponent(a.url).replace(/\/{2,}/g,'/'),a)),window.dispatchEvent(new Event('search:loaded'))})}highlightText(a,b,f){const c=a.nodeValue;let d=b.start;const e=[];for(const{position:a,length:h}of b.hits){const i=document.createTextNode(c.substring(d,a));d=a+h;const g=document.createElement('mark');g.className=f,g.appendChild(document.createTextNode(c.substr(a,h))),e.push(i,g)}a.nodeValue=c.substring(d,b.end),e.forEach(b=>{a.parentNode.insertBefore(b,a)})}highlightSearchWords(b){const c=new URL(location.href).searchParams.get('highlight'),d=c?c.split(' '):[];if(!d.length||!b)return;const a=document.createTreeWalker(b,NodeFilter.SHOW_TEXT,null),e=[];while(a.nextNode())a.currentNode.parentNode.matches('button, select, textarea')||e.push(a.currentNode);e.forEach(a=>{const[b]=this.getIndexByWord(d,a.nodeValue);if(!b.length)return;const c=this.mergeIntoSlice(0,a.nodeValue.length,b);this.highlightText(a,c,'search-keyword')})}}document.addEventListener('DOMContentLoaded',()=>{if(!NexT.CONFIG.localSearch.path){console.warn('`search indexes file` is not configurate!');return}const a=new LocalSearch({path:NexT.CONFIG.localSearch.path,top_n_per_article:NexT.CONFIG.localSearch.topnperarticle,unescape:NexT.CONFIG.localSearch.unescape}),b=document.querySelector('.search-input'),c=()=>{if(!a.isfetched)return;const f=b.value.trim().toLowerCase(),e=f.split(/[-\s]+/),c=document.querySelector('.search-result-container');let d=[];if(f.length>0&&(d=a.getResultItems(e)),e.length===1&&e[0]==='')c.classList.add('no-result'),c.innerHTML='<div class="search-result-icon"><i class="fa fa-search fa-5x"></i></div>';else if(d.length===0)c.classList.add('no-result'),c.innerHTML='<div class="search-result-icon"><i class="far fa-frown fa-5x"></i></div>';else{d.sort((a,b)=>a.includedCount!==b.includedCount?b.includedCount-a.includedCount:a.hitCount!==b.hitCount?b.hitCount-a.hitCount:b.id-a.id);const a=NexT.CONFIG.i18n.hits.replace('${hits}',d.length);c.classList.remove('no-result'),c.innerHTML=`<div class="search-stats">${a}</div>
        <hr>
        <ul class="search-result-list">${d.map(a=>a.item).join('')}</ul>`,typeof pjax=='object'&&pjax.refresh(c)}};a.highlightSearchWords(document.querySelector('.post-body')),NexT.CONFIG.localSearch.preload&&a.fetchData(),NexT.CONFIG.localSearch.trigger==='auto'?b.addEventListener('input',c):(document.querySelector('.search-icon').addEventListener('click',c),b.addEventListener('keypress',a=>{a.key==='Enter'&&c()})),window.addEventListener('search:loaded',c),document.querySelectorAll('.popup-trigger').forEach(c=>{c.addEventListener('click',()=>{document.body.classList.add('search-active'),setTimeout(()=>b.focus(),500),a.isfetched||a.fetchData()})});const d=()=>{document.body.classList.remove('search-active')};document.querySelector('.search-pop-overlay').addEventListener('click',a=>{a.target===document.querySelector('.search-pop-overlay')&&d()}),document.querySelector('.popup-btn-close').addEventListener('click',d),document.addEventListener('pjax:success',()=>{a.highlightSearchWords(document.querySelector('.post-body')),d()}),window.addEventListener('keyup',a=>{a.key==='Escape'&&d()})}),function(){var m=new Date,a=this||self,n=/^[\w+/_-]+[=]{0,2}$/,g=null,c,h;function k(a){return(a=a.querySelector&&a.querySelector("script[nonce]"))&&(a=a.nonce||a.getAttribute("nonce"))&&n.test(a)?a:""}function l(a,b){function c(){}c.prototype=b.prototype,a.i=b.prototype,a.prototype=new c,a.prototype.constructor=a,a.h=function(d,e,f){for(var c=Array(arguments.length-2),a=2;a<arguments.length;a++)c[a-2]=arguments[a];return b.prototype[e].apply(d,c)}}function e(a){return a}function b(a){if(Error.captureStackTrace)Error.captureStackTrace(this,b);else{var c=Error().stack;c&&(this.stack=c)}a&&(this.message=String(a))}l(b,Error),b.prototype.name="CustomError";function f(a,d){a=a.split("%s");for(var e="",f=a.length-1,c=0;c<f;c++)e+=a[c]+(c<d.length?d[c]:"%s");b.call(this,e+a[f])}l(f,b),f.prototype.name="AssertionError";function j(a,b){throw new f("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1))}function d(a,b){this.g=b===h?a:""}d.prototype.toString=function(){return this.g+""},h={};function i(b){var a=document.getElementsByTagName("head")[0];a||(a=document.body.parentNode.appendChild(document.createElement("head"))),a.appendChild(b)}function o(l){var n=document,b="SCRIPT",p,q,o,m,f;if("application/xhtml+xml"===n.contentType&&(b=b.toLowerCase()),b=n.createElement(b),b.type="text/javascript",b.charset="UTF-8",void 0===c)if(n=null,p=a.trustedTypes,p&&p.createPolicy){try{n=p.createPolicy("goog#html",{createHTML:e,createScript:e,createScriptURL:e})}catch(b){a.console&&a.console.error(b.message)}c=n}else c=n;l=(n=c)?n.createScriptURL(l):l,l=new d(l,h);a:{try{if(q=b&&b.ownerDocument,o=q&&(q.defaultView||q.parentWindow),o=o||a,o.Element&&o.Location){m=o;break a}}catch(a){}m=null}if(m&&"undefined"!=typeof m.HTMLScriptElement&&(!b||!(b instanceof m.HTMLScriptElement)&&(b instanceof m.Location||b instanceof m.Element))){if(m=typeof b,"object"==m&&null!=b||"function"==m)try{f=b.constructor.displayName||b.constructor.name||Object.prototype.toString.call(b)}catch(a){f="<object could not be stringified>"}else f=void 0===b?"undefined":null===b?"null":typeof b;j("Argument is not a %s (or a non-Element, non-Location mock); got: %s","HTMLScriptElement",f)}l instanceof d&&l.constructor===d?f=l.g:(f=typeof l,j("expected object of type TrustedResourceUrl, got '"+l+"' of type "+("object"!=f?f:l?Array.isArray(l)?"array":f:"null")),f="type_error:TrustedResourceUrl"),b.src=f,(f=b.ownerDocument&&b.ownerDocument.defaultView)&&f!=a?f=k(f.document):(null===g&&(g=k(a.document)),f=g),f&&b.setAttribute("nonce",f),i(b)}function p(b){var a=document.createElement("link");a.type="text/css",a.rel="stylesheet",a.charset="UTF-8",a.href=b,i(a)}function q(a){a=a.split(".");for(var c=window,b=0;b<a.length;++b)if(!(c=c[a[b]]))return!1;return!0}function r(b){b=b.split(".");for(var a=window,c=0;c<b.length;++c)a.hasOwnProperty?a.hasOwnProperty(b[c])?a=a[b[c]]:a=a[b[c]]={}:a=a[b[c]]||(a[b[c]]={});return a}if(window.addEventListener&&"undefined"==typeof document.readyState&&window.addEventListener("DOMContentLoaded",function(){document.readyState="complete"},!1),q('google.translate.Element'))return;(function(){var a=r('google.translate._const'),c,d,b;a._cest=m,m=void 0,a._cl=navigator.language||navigator.userLanguage,a._cuc='googleTranslateElementInit',a._cac='',a._cam='',a._ctkk='449649.3822363247',c='translate.googleapis.com',d=('https')+'://',b=d+c,a._pah=c,a._pas=d,a._pbi='',a._pci=b+'/translate_static/img/te_ctrl3.gif',a._pli=b+'/translate_static/img/loading.gif',a._plla=c+'/translate_a/l',a._pmi=b+'/translate_static/img/mini_google.png',a._ps=window.translateelement_styles,a._puh='translate.google.cn',p(a._ps),o(b+`/translate_static/js/element/main_${navigator.language||navigator.userLanguage}.js`)})()}();function googleTranslateElementInit(){new google.translate.TranslateElement({includedLanguages:'zh-CN,zh-TW,en,ru',autoDisplay:!1},'google_translate_element')}